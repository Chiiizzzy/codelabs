
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>How to Install CPU-only Milvus in minutes</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-142992812-1"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="how-to-install-cpu-only-milvus-in-minutes"
                  title="How to Install CPU-only Milvus in minutes"
                  environment="web"
                  feedback-link="https://github.com/milvus-io/milvus">
    
      <google-codelab-step label="Prerequisites" duration="1">
        <h2 is-upgraded>Operating system requirements</h2>
<table>
<tr><td colspan="1" rowspan="1"><p>Operating system</p>
</td><td colspan="1" rowspan="1"><p>Supported versions</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>CentOS</p>
</td><td colspan="1" rowspan="1"><p>7.5 or higher</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Ubuntu LTS</p>
</td><td colspan="1" rowspan="1"><p>18.04 or higher</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Windows</p>
</td><td colspan="1" rowspan="1"><p>Windows 10 64-bit: Pro, Enterprise, or Education (Build 15063 or later)</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>macOS</p>
</td><td colspan="1" rowspan="1"><p>10.13 or higher</p>
</td></tr>
</table>
<h2 is-upgraded>Hardware requirements</h2>
<table>
<tr><td colspan="1" rowspan="1"><p>Component</p>
</td><td colspan="1" rowspan="1"><p>Recommended configuration</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>CPU</p>
</td><td colspan="1" rowspan="1"><p>Intel CPU Sandy Bridge or higher.</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>CPU instruction set</p>
</td><td colspan="1" rowspan="1"><p>SSE42</p>
<p>AVX</p>
<p>AVX2</p>
<p>AVX512</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>RAM</p>
</td><td colspan="1" rowspan="1"><p>8 GB or more (depends on the data volume)</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Hard drive</p>
</td><td colspan="1" rowspan="1"><p>SATA 3.0 SSD or higher</p>
</td></tr>
</table>


      </google-codelab-step>
    
      <google-codelab-step label="Install Docker" duration="3">
        <ul>
<li>If you&#39;re using Ubuntu or CentOS, <a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank">Install Docker</a> 19.03 or higher on your local host machine.</li>
<li>If you&#39;re installing Milvus on Windows, install <a href="https://docs.docker.com/docker-for-windows/install/" target="_blank">Docker Desktop</a>, and make certain configurations in <strong>Settings &gt; Advanced</strong>. Make sure the Memory available to Docker Engine exceeds the sum of <code>insert_buffer_size</code> and <code>cpu_cache_capacity</code> you set in the <code>server_config.yaml</code> file.</li>
<li>If you&#39;re installing Milvus on macOS, install <a href="https://docs.docker.com/docker-for-mac/install/" target="_blank">Docker Desktop for Mac</a>, and make certain configurations in <strong>Settings &gt; Advanced</strong>. Make sure the Memory available to Docker Engine exceeds the sum of <code>insert_buffer_size</code> and <code>cpu_cache_capacity</code> you set in the <code>server_config.yaml</code> file.</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Confirm Docker status" duration="1">
        <p>Confirm that the Docker daemon is running in the background:</p>
<pre><code language="language-shell" class="language-shell">$ docker info
</code></pre>
<p>If you do not see the server listed, start the <strong>Docker</strong> daemon.</p>
<p>Note: On Linux, Docker needs sudo privileges. To run Docker command without <code>sudo</code>, create the <code>docker</code> group and add your user. For details, see the <a href="https://docs.docker.com/install/linux/linux-postinstall/" target="_blank">post-installation steps for Linux</a>.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Select Milvus version from Docker hub" duration="4">
        <p>Go to <a href="https://hub.docker.com/r/milvusdb/milvus/tags" target="_blank">dockerhub</a>, ensure which version of milvus are you going to install. Click the copy button. Full docker pull command will be copied.</p>
<p class="image-container"><img alt="dockerhub-milvus" title="dockerhub-milvus" src="img/69971ca5b2c5908c.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Pull Milvus Image" duration="0">
        <p>Paste the command in your console window</p>
<pre><code language="language-shell" class="language-shell">$ docker pull milvusdb/milvus:1.0.0-cpu-d030521-1ea92e
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Create Milvus directories" duration="1">
        <p>Create 4 directories for milvus, we will mount these directories into the container later, you can place these folder anywhere, now, we put it at home directory.</p>
<ul>
<li>db: vectors will be stored in this directory</li>
<li>logs: any milvus running logs will be here</li>
<li>wal: wal will be stored in this directory</li>
<li>conf: configuration files will be stored in this directory</li>
</ul>
<pre><code language="language-shell" class="language-shell">$ mkdir -p /home/$USER/milvus/db
$ mkdir -p /home/$USER/milvus/logs
$ mkdir -p /home/$USER/milvus/wal
$ mkdir -p /home/$USER/milvus/conf
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Download configuration files" duration="2">
        <p>Download the standard milvus configuration file, place it in the conf directory you just created.</p>
<pre><code language="language-shell" class="language-shell">$ cd /home/$USER/milvus/conf
$ wget https://raw.githubusercontent.com/milvus-io/milvus/v1.0.0/core/conf/demo/server_config.yaml
</code></pre>
<p>Note: In case you encounter problems downloading configuration files using <code>wget</code> command, you can also create <code>server_config.yaml</code> under <code>/home/$USER/milvus/conf</code>, then copy and paste the content from <a href="https://github.com/milvus-io/milvus/blob/v1.0.0/core/conf/demo/server_config.yaml" target="_blank">server config file</a>.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Start Milvus" duration="1">
        <p>Run the docker that we just pulled. We will map the ports and mounts directories we just created.</p>
<ul>
<li>Milvus default port is 19530</li>
<li>Milvus default http port is 19121</li>
</ul>
<pre><code language="language-shell" class="language-shell">$ docker run --name milvus_cpu_1.0.0 \
-p 19530:19530 \
-p 19121:19121 \
-v /home/$USER/milvus/db:/var/lib/milvus/db \
-v /home/$USER/milvus/conf:/var/lib/milvus/conf \
-v /home/$USER/milvus/logs:/var/lib/milvus/logs \
-v /home/$USER/milvus/wal:/var/lib/milvus/wal \
milvusdb/milvus:1.0.0-cpu-d030521-1ea92e
</code></pre>
<p>You can see someting like this, and we are done <img alt="dockerhub-milvus" title="dockerhub-milvus" src="img/cf72cfa706500ec6.png"></p>
<p>If you want run milvus in the background, add option â€˜-d&#39;</p>
<pre><code language="language-shell" class="language-shell">$ docker run -d --name milvus_cpu_1.0.0 \
-p 19530:19530 \
-p 19121:19121 \
-v /home/$USER/milvus/db:/var/lib/milvus/db \
-v /home/$USER/milvus/conf:/var/lib/milvus/conf \
-v /home/$USER/milvus/logs:/var/lib/milvus/logs \
-v /home/$USER/milvus/wal:/var/lib/milvus/wal \
milvusdb/milvus:1.0.0-cpu-d030521-1ea92e
</code></pre>
<h2 is-upgraded>Next</h2>
<ul>
<li>You can <a href="https://milvus.io/docs/v1.0.0/example_code.md" target="_blank">Try an example program</a></li>
<li>Learn more <a href="https://milvus.io/docs/about_milvus/overview.md" target="_blank">about milvus</a></li>
<li><a href="https://github.com/milvus-io/milvus" target="_blank">Give milvus a star if you like it</a></li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
